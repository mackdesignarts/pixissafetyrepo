
<div class="page-header">
  <h1>Crews
    <div class="pull-right">
      <button data-ui-sref="app.crew.index.new" class="btn btn-primary">Add Crew</button> 
        <a data-ng-href="api/Crew{{odata()}}&format=csv" download="crews.csv" target="_blank" class="btn btn-success">Export</a>
    </div>
  </h1>
</div>
<div class="row">
  <div class="form-group col-md-3">
    <div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
      <input type="search" data-ng-model="grid.search" placeholder="Search" class="form-control"/>
    </div>
  </div>
</div>
<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th data-ng-click="grid.orderBy = 'CrewName'; grid.reverse = !grid.reverse">Crew Name</th>
      <th data-ng-click="grid.orderBy = 'LocationName'; grid.reverse = !grid.reverse">Location</th>
      <th data-ng-click="grid.orderBy = 'Region'; grid.reverse = !grid.reverse">Region</th>
      <!--<th>Quick Manage</th>-->
    </tr>
  </thead>
  <tbody>
    <tr data-ng-repeat="crew in crews.data">
        <td data-ui-sref="app.crew.detail({id: crew.CrewID})">{{crew.CrewName}}</td>
        <td data-ui-sref="app.crew.detail({id: crew.CrewID})">{{crew.LocationCode.LocationName}}</td>
        <td data-ui-sref="app.crew.detail({id: crew.CrewID})">{{crew.Region.Region1}}</td>
       
      <!--<td> <a>Schedule Course</a></td>-->
    </tr>
  </tbody>
</table>
<!--<div class="row row-table">
  <div class="row table-header">
    <div data-ng-click="grid.orderBy = 'CrewName'; grid.reverse = !grid.reverse" class="col-xs-9">Crew Name</div>
    <div class="col-xs-3"></div>
  </div>
  <div data-ng-repeat="crew in crews.data" class="row table-row">
    <div data-ng-click="crew.showMembers  = !crew.showMembers" class="col-xs-9">{{crew.CrewName}}</div>
    <div class="col-xs-3 text-right actions"><a data-ng-click="addMember(crew)">Add Member</a></div>
    <div data-ng-if="crew.showMembers" class="row row-table">
      <div class="row table-header">
        <div class="col-xs-3">Member Name</div>
        <div class="col-xs-2">Department</div>
        <div class="col-xs-2">Occupation</div>
        <div class="col-xs-2">Hire Date</div>
      </div>
        <div data-ng-repeat="detail in crew.CrewDetails" data-ng-init="employee = detail.Employee; foreman = (crew.CrewName == (employee.EmployeeFirstName+' '+employee.EmployeeLastName))" data-ng-hide="employee.hide" class="row table-row">
            <div class="col-xs-3">{{employee.EmployeeFirstName}} {{employee.EmployeeLastName}}</div>
            <div class="col-xs-2">{{employee.Department}}</div>
            <div class="col-xs-2">{{employee.Occupation}}</div>
            <div class="col-xs-2">{{employee.HireDate | date: 'MM/dd/yyyy'}}</div>
            <div data-ng-hide="foreman" class="col-xs-3 text-right actions"><a data-ng-click="removeMember(detail.CrewDetailID); employee.hide = true">Remove</a> <a data-ng-click="foremanMember(crew,employee); crew.CrewName = (employee.EmployeeFirstName+' '+employee.EmployeeLastName); foreman = true;">Make Foreman</a></div>
        </div>
    </div>
  </div>
</div>-->
<pagination data-total-items="crews.total" data-items-per-page="grid.ipp" data-page="grid.page" data-max-size="5" data-boundary-links="true" class="pagination-sm"></pagination>